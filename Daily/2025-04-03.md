# 📘 2025-04-03 - DevOps Bootcamp Day 2（續）

---

## 🧪 晚上練習：Shell 指令精煉（log 分析與處理）

### 📁 準備 log 練習檔案
```bash
mkdir log-practice && cd log-practice
touch app.log debug.log error.log

# 模擬 log 內容
echo -e "ERROR: database down\nINFO: start service\nERROR: timeout\nWARNING: slow request\nINFO: done" >> app.log
echo -e "ERROR: memory\nERROR: disk\nINFO: restart" >> debug.log
echo -e "ERROR: database\nERROR: timeout\nINFO: loaded" >> error.log
```

---

### 🔍 find + xargs
```bash
find . -name "*.log" | xargs grep "ERROR"
find . -name "*.log" | xargs wc -l
```

### ✂️ cut + sort + uniq（log 分析）
```bash
grep -h "ERROR" *.log | cut -d ":" -f2 | sort | uniq -c
```

### 💡 結果說明
- `-h`：不印出檔名
- `cut -d ":" -f2`：取第二欄的錯誤描述（冒號後內容）
- `sort | uniq -c`：統計每種錯誤出現次數

---

### 🧙 awk + sed 初探
```bash
awk -F ":" '/ERROR/ { print $2 }' *.log
sed -n '/ERROR/p' *.log
```

### ✅ 指令說明
- `awk -F ":"`：指定冒號為分隔符，`$2` 表示第二欄
- `/ERROR/ { print $2 }`：只印出包含 ERROR 的行的第二欄
- `sed -n '/ERROR/p'`：
  - `-n` 不自動列印所有行
  - `/ERROR/` 匹配行
  - `p` 表示印出符合的行

---

### ✅ 晚上完成事項
- [x] 建立 log 測試檔案
- [x] 練習 grep + cut + uniq 分析錯誤類型
- [x] 使用 awk / sed 處理錯誤行內容
- [x] 了解 sed -n 'pattern/p' 的結構與用法
