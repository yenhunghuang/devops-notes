# ğŸ“˜ 2025-04-30 - DevOps Bootcamp Day 17

---

## ğŸ¯ ä»Šæ—¥ä¸»é¡Œï¼šHelm Chart é€²éšæ“ä½œ - å‡ç´šã€é©—è­‰èˆ‡å¤šç‰ˆæœ¬é…ç½®

---

## âœ… ä»Šæ—¥å®Œæˆé …ç›®

### ğŸ”„ ä½¿ç”¨ `helm upgrade` é€²è¡Œç‰ˆæœ¬å‡ç´š

- æ¨¡æ“¬æ›´æ–°ï¼šå°‡ `APP_VERSION` å¾ v1 å‡ç´šç‚º v2ï¼Œå†å‡ç´šç‚º v3
- ä¿®æ”¹ deployment.yaml åŠ å…¥ç’°å¢ƒè®Šæ•¸ï¼š
  ```yaml
  env:
  - name: APP_VERSION
    value: "{{ .Values.env.APP_VERSION }}"
  ```
- ä½¿ç”¨ï¼š
  ```bash
  helm upgrade node-deploy-demo ./node-deploy-demo-chart
  ```

### ğŸ§¹ ä½¿ç”¨ `helm uninstall` æ¸…é™¤éƒ¨ç½²è³‡æº

- ä½¿ç”¨ï¼š
  ```bash
  helm uninstall node-deploy-demo
  ```
- é©—è­‰æ‰€æœ‰è³‡æºï¼ˆDeployment/Pod/Serviceï¼‰å·²æ¸…é™¤ï¼Œç’°å¢ƒä¹¾æ·¨
- ç§»é™¤å¤šé¤˜çš„ Serviceï¼ˆè‹¥æ—©æœŸæ‰‹å‹•å»ºç«‹ï¼‰

### âœ… ä½¿ç”¨ `helm lint` é©—è­‰ Chart æ­£ç¢ºæ€§

- åŸ·è¡Œï¼š
  ```bash
  helm lint ./node-deploy-demo-chart
  ```
- é©—è­‰çµæœï¼š
  ```
  1 chart(s) linted, 0 chart(s) failed
  ```

### âš™ï¸ ä½¿ç”¨ `--set` èˆ‡ `-f` å¯¦ç¾å¤šç‰ˆæœ¬éƒ¨ç½²

- ä½¿ç”¨ `--set` å‹•æ…‹æ³¨å…¥ï¼š
  ```bash
  helm install node-deploy-demo ./node-deploy-demo-chart     --set replicaCount=2     --set env.APP_VERSION=v3
  ```
- é©—è­‰ï¼š
  - 2 å° Pod æˆåŠŸå•Ÿå‹•
  - æ¯å€‹ Pod æ³¨å…¥æ­£ç¢ºç’°å¢ƒè®Šæ•¸ `APP_VERSION=v3`

---

## ğŸ§  æ·±å…¥ç†è§£èˆ‡åæ€

- **`helm upgrade`** èƒ½é€²è¡Œæ»¾å‹•æ›´æ–°ä¸¦è‡ªå‹•ä¿ç•™æ­·å²ç‰ˆæœ¬ï¼ˆæ”¯æ´ rollbackï¼‰
- **`helm uninstall`** å¹«åŠ©æ¸…ç†èˆŠç‰ˆæœ¬ï¼Œé‡å»ºä¹¾æ·¨æ¸¬è©¦ç’°å¢ƒ
- **`helm lint`** æ˜¯ CI/CD pipeline ä¸­å¿…å‚™çš„èªæ³•å®‰å…¨æª¢æŸ¥å·¥å…·
- **`--set` / `-f`** æä¾›å¤šçµ„åƒæ•¸çµ„åˆï¼Œæ”¯æ´ dev/staging/prod çš„å¤šç‰ˆæœ¬éƒ¨ç½²

---

## âœ… ä»Šæ—¥ç¸½çµ

ä»Šå¤©æŒæ¡äº† Helm Chart çš„å‡ç´šã€ç‰ˆæœ¬æ§ç®¡èˆ‡å¤šç‰ˆæœ¬éƒ¨ç½²æŠ€å·§ï¼Œ  
ä¸¦æˆåŠŸä½¿ç”¨ CLI å·¥å…·éˆå®Œæˆä¸€æ•´å¥—æ¨¡æ“¬å‡ç´š + é©—è­‰æµç¨‹ã€‚  
ç‚ºæœªä¾†é€²ä¸€æ­¥æ•´åˆ GitHub Actions Ã— K8s è‡ªå‹•åŒ–éƒ¨ç½²æ‰“ä¸‹å …å¯¦åŸºç¤ï¼ğŸš€

