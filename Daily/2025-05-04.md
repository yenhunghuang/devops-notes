
# 2025-05-04 - DevOps Bootcampï½œDay 20 ç­†è¨˜ï¼šGitOps åˆæ¢ï¼ˆArgoCDï¼‰

## ğŸ·ï¸ ä»€éº¼æ˜¯ GitOpsï¼Ÿ

- **Git ç‚ºå”¯ä¸€çœŸç›¸ï¼ˆSingle Source of Truthï¼‰**
- **åŸºç¤æ¦‚å¿µï¼š**  
  â†’ Git è£¡çš„ K8s é…ç½®ï¼ˆYAMLã€Helm Chartï¼‰ï¼ ç·šä¸Š Kubernetes ç’°å¢ƒç‹€æ…‹  
  â†’ é€é Git commit / PR æ§åˆ¶éƒ¨ç½² â†’ è‡ªå‹•åŒæ­¥åˆ° K8s â†’ ä¸æ‰‹å‹• `kubectl apply`
- **å„ªå‹¢ï¼š**  
  âœ… ç‹€æ…‹å¯è¿½è¹¤  
  âœ… è‡ªå‹•åŒæ­¥  
  âœ… æ”¯æ´å›æ»¾  
  âœ… å®¡æ ¸æµç¨‹å…§å»ºï¼ˆé€é PRï¼‰

## ğŸ·ï¸ ä»€éº¼æ˜¯ ArgoCDï¼Ÿ

- **ä¸€å€‹ GitOps å·¥å…·** â†’ å°‡ Git è£¡çš„ YAML/Helm Chart è‡ªå‹•éƒ¨ç½²åˆ° Kubernetes
- åŠŸèƒ½ï¼š
  - è‡ªå‹•åŒæ­¥ Git â†’ K8s
  - ç‹€æ…‹ç›£æ§ã€å¯è¦–åŒ– UI
  - æ”¯æ´ Helm, Kustomize, plain YAML
  - ç·šä¸Š drift è‡ªå‹•ä¿®å¾©
- æµç¨‹ï¼š
  1. Git commit â†’ YAML æª”
  2. ArgoCD åµæ¸¬è®Šæ›´
  3. è‡ªå‹•å¥—ç”¨åˆ° Kubernetes
  4. ç¢ºä¿ç·šä¸Šç‹€æ…‹èˆ‡ Git ç›¸ç¬¦

## ğŸ—ï¸ ä»Šå¤©å®Œæˆçš„æ“ä½œ

âœ… **1ï¸âƒ£ å®‰è£ ArgoCD**
```bash
kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
kubectl get pods -n argocd
```

âœ… **2ï¸âƒ£ é–‹å•Ÿ ArgoCD UI**
```bash
kubectl port-forward svc/argocd-server -n argocd 8080:443
# ç€è¦½å™¨è¨ªå• â†’ https://localhost:8080
```

âœ… **3ï¸âƒ£ å–å¾—åˆå§‹å¯†ç¢¼**
```bash
kubectl get secret argocd-initial-admin-secret -n argocd -o jsonpath="{.data.password}" | base64 -d
```

â†’ ç™»å…¥ UI ï¼ˆå¸³è™Ÿï¼šadminï¼‰

âœ… **4ï¸âƒ£ å»ºç«‹ Application**
- **Repository URL:** GitHub Repo (å« k8s yaml)
- **Path:** YAML æª”è·¯å¾‘
- **Cluster URL:** é è¨­ cluster
- **Namespace:** default

â†’ é» Create â†’ ArgoCD è‡ªå‹• deploy

## ğŸ† å­¸åˆ°çš„é‡é»

- GitOps æµç¨‹å®Œæ•´è·‘é€š
- ç†è§£ã€ŒGit = ç’°å¢ƒå”¯ä¸€çœŸç›¸ã€çš„æ„ç¾©
- å­¸æœƒç”¨ ArgoCD ç®¡ç†éƒ¨ç½²ã€è¿½è¹¤ç‹€æ…‹
- èƒ½é€é UI æª¢è¦– Application çš„ Sync / Health / Revision
- ç·šä¸Šæœ‰ç•°å‹• â†’ ArgoCD è‡ªå‹•ä¿®æ­£

## ğŸ“Œ å¿ƒå¾—

âœ… GitOps æµç¨‹è®“éƒ¨ç½²ã€Œç¨‹å¼åŒ–ã€ã€ã€Œç‰ˆæœ¬åŒ–ã€ã€ã€Œè‡ªå‹•åŒ–ã€  
âœ… ArgoCD è®“ã€Œç‹€æ…‹è‡ªå‹•è¿½è¹¤ â†’ ä¸ç”¨æ‰‹å‹• apply â†’ ä¸€åˆ‡äº¤çµ¦ Git & ArgoCDã€  
âœ… UI å¾ˆç›´è§€ã€åŒæ­¥ç‹€æ…‹ä¸€çœ¼çœ‹æ¸…

## ğŸ“ æœªä¾†è¦åŠƒ

- æ¸¬è©¦ auto-sync & manual sync
- ç·´ç¿’å¾ Git commit è§¸ç™¼ä¸åŒç‰ˆæœ¬éƒ¨ç½²
- å˜—è©¦èˆ‡ Helm çµåˆä½¿ç”¨ ArgoCD

## ğŸ”— è£œå……æŒ‡ä»¤

æŸ¥çœ‹ Application ç‹€æ…‹ï¼š
```bash
kubectl get applications -n argocd
```

ç”¨ CLI ç™»å…¥ï¼š
```bash
argocd login localhost:8080
```

âœ… **ä»Šæ—¥ GitOps / ArgoCD å…¥é–€æŒ‘æˆ°æˆåŠŸï¼**
