# ğŸ“˜ 2025-05-01 - DevOps Bootcamp Day 18

---

## ğŸ¯ ä»Šæ—¥ä¸»é¡Œï¼šHelm Ã— GitHub Actions æ•´åˆè‡ªå‹•éƒ¨ç½² (Self-hosted Runner)

---

## âœ… ä»Šæ—¥å®Œæˆé …ç›®

### ğŸ–¥ï¸ 1ï¸âƒ£ è¨­ç½® Self-hosted Runner

- æˆåŠŸåœ¨æœ¬åœ°å®‰è£ä¸¦å•Ÿå‹• GitHub Actions self-hosted runner
- runner æˆåŠŸé€£æ¥åˆ° GitHub Repository
- runner å¯ä»¥ç›´æ¥è¨ªå•æœ¬åœ° Minikube clusterï¼Œä¸éœ€è¦é¡å¤– VPN / port forwarding

---

### âš™ï¸ 2ï¸âƒ£ æ”¹é€² GitHub Actions workflow

- åœ¨ `.github/workflows/helm-deploy.yml` ä¸­ï¼š
  - **æ·»åŠ  Docker image build & push**
  - **æ·»åŠ  Helm upgrade / install**
  - **æ·»åŠ  minikube ç‹€æ…‹æª¢æŸ¥èˆ‡è‡ªå‹•å•Ÿå‹•**
  - **æ·»åŠ  minikube tunnel ç‹€æ…‹æª¢æŸ¥èˆ‡è‡ªå‹•å•Ÿå‹•**

âœ… ç¢ºä¿ runner å•Ÿå‹•æ™‚èƒ½å¤ è‡ªå‹•é€£ä¸Š minikube èˆ‡ tunnel

---

### ğŸ—ï¸ 3ï¸âƒ£ Kubernetes éƒ¨ç½²å„ªåŒ–

- **å°‡ Service é¡å‹å¾ NodePort æ”¹ç‚º LoadBalancer**
- å•Ÿå‹• `minikube tunnel` ä»¥æ”¯æ´ LoadBalancer service
- æˆåŠŸé€šé `http://127.0.0.1:3000` è¨ªå•æ‡‰ç”¨

---

### ğŸš€ 4ï¸âƒ£ éƒ¨ç½²æµç¨‹è‡ªå‹•åŒ–

- æ¯æ¬¡ push åˆ° `main` åˆ†æ”¯æœƒè‡ªå‹•è§¸ç™¼ï¼š
  1. å»ºæ§‹æ–°çš„ Docker image
  2. æ¨é€ image åˆ° Docker Hub
  3. ä½¿ç”¨ Helm å‡ç´š Kubernetes éƒ¨ç½²
  4. ä½¿ç”¨ Git commit SHA ä½œç‚º image tag / Helm version

âœ… å®Œå…¨è‡ªå‹•åŒ– **CI/CD from commit â†’ deploy**

---

### ğŸ§ª 5ï¸âƒ£ æˆåŠŸé©—è­‰éƒ¨ç½²

- æˆåŠŸè¨ªå•æœå‹™ â†’ `http://127.0.0.1:3000`
- `kubectl get pods` ç¢ºèª Pod running
- `helm list` ç¢ºèª Helm release éƒ¨ç½²ç‹€æ…‹

---

## ğŸ“ éœ€è¦æ³¨æ„çš„é‡é»

âœ… **minikube tunnel** é‹è¡Œä¸­ â†’ å¿…é ˆä¿æŒçµ‚ç«¯é–‹å•Ÿ  
âœ… **GitHub Secrets** å·²è¨­ç½® Docker Hub credentials  
âœ… **Self-hosted runner å¿…é ˆæœ¬åœ°é‹è¡Œ Minikube**

---

## ğŸ§  æ·±å…¥ç†è§£

ä»Šå¤©å¯¦ç¾äº†ä¸€å€‹ **å®Œæ•´æœ¬åœ° CI/CD æµç¨‹**ï¼š

1. **GitHub Actions workflow â†’ è‡ªæ¶ runner åŸ·è¡Œ**
2. **è‡ªå‹• build â†’ push Docker image â†’ helm upgrade â†’ éƒ¨ç½² k8s**
3. **è‡ªå‹• expose LoadBalancer â†’ ä½¿ç”¨ tunnel ä»£ç† localhost**

âœ… å¯¦ç¾ï¼šåªè¦ push commit â†’ å…¨è‡ªå‹•éƒ¨ç½²åˆ° K8sï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ

---

## ğŸ‰ ç¸½çµ

ä»Šå¤©å®Œæˆäº†ä¸€å¥—å¯ä»¥æŒçºŒé‹è¡Œçš„ **æœ¬åœ° DevOps CI/CD Pipeline**  
å…¨æµç¨‹è‡ªå‹•ï¼šå¾ç¨‹å¼ç¢¼æ¨é€ â†’ åˆ° Kubernetes é›†ç¾¤éƒ¨ç½² â†’ è‡ªå‹•å‡ç´šæ›´æ–°ã€‚

é€™å€‹æ¶æ§‹æœªä¾†å¯ä»¥é€²ä¸€æ­¥é·ç§»åˆ°ï¼š
- GitHub Cloud Runner + Remote Kubernetes
- GitHub Enterprise / On-prem Solution
- Public Cloud (EKS / GKE / AKS)

å·²ç¶“é”æˆ **é–‹ç™¼è€…å…§éƒ¨è‡ªå‹•åŒ–éƒ¨ç½²æœ€ä½³å¯¦è¸ï¼** ğŸš€âœ¨
